(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f52bf7c"],{"0cb2":function(t,e,n){var r=n("7b0b"),a=Math.floor,i="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,c,u,l){var f=n+t.length,h=c.length,d=o;return void 0!==u&&(u=r(u),d=s),i.call(l,d,(function(r,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(f);case"<":s=u[i.slice(1,-1)];break;default:var o=+i;if(0===o)return r;if(o>h){var l=a(o/10);return 0===l?r:l<=h?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):r}s=c[o-1]}return void 0===s?"":s}))}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("577e"),s=n("d039"),o=n("ad6d"),c="toString",u=RegExp.prototype,l=u[c],f=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=c;(f||h)&&r(RegExp.prototype,c,(function(){var t=a(this),e=i(t.source),n=t.flags,r=i(void 0===n&&t instanceof RegExp&&!("flags"in u)?o.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},"2d3b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-wrapper"},[n("div",{staticClass:"search-head"},[n("van-icon",{staticClass:"arr-left",attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.goBack()}}}),n("van-search",{staticClass:"search-container",attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{search:t.onSearch,input:t.input,focus:t.focus,blur:t.blur},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t.isCardShow?n("van-icon",{attrs:{name:"cart-o",badge:t.badge,id:"shop-car"},on:{click:function(e){return t.$router.push({name:"Shopping"})}}}):n("div",{staticClass:"search-btn",on:{click:t.handleBtnSearch}},[t._v("搜索")])],1),n("div",{staticClass:"like-search"},[n("van-list",t._l(t.likeList,(function(e){return n("van-cell",{key:e,on:{click:function(n){return t.onSearch(e)}}},[[n("span",{staticClass:"custom-title",domProps:{innerHTML:t._s(t.formatHTML(e))}})]],2)})),1)],1),t.goodsList.length>0?n("div",{staticClass:"goodslist"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodsList,(function(e){return n("GoodsCord",t._b({key:e.id,attrs:{num:t.counterMap[e.id]}},"GoodsCord",e,!1))})),1)],1):t._e(),t.likeList.length<=0?n("div",{staticClass:"history"},[n("MyHistory",{attrs:{searchList:t.searchPastList},on:{search:t.onSearch}})],1):t._e()])},a=[],i=n("1da1"),s=n("b85c"),o=(n("96cf"),n("07ac"),n("7db0"),n("4e82"),n("ac1f"),n("841c"),n("4d63"),n("25f0"),n("5319"),n("9767"),n("03fb")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"history"},[n("h4",[t._v("历史记录: ")]),t._l(t.searchList,(function(e){return n("div",{key:e.time,staticClass:"his-item",on:{click:function(n){return t.search(e.value)}}},[t._v(t._s(e.value))])}))],2)},u=[],l={name:"MyHistory",props:{searchList:{default:[]}},methods:{search:function(t){this.$emit("search",t)}}},f=l,h=(n("98a9"),n("2877")),d=Object(h["a"])(f,c,u,!1,null,"6ff86d84",null),v=d.exports,p=n("365c"),g={name:"Search",components:{GoodsCord:o["a"],MyHistory:v},data:function(){return{value:"",likeList:[],timer:null,loading:!1,finished:!1,page:1,size:5,goodsList:[],total:0,isCardShow:!1,searchPastList:[]}},computed:{counterMap:function(){return this.$store.state.counterMap},badge:function(){var t=Object.values(this.counterMap).reduce((function(t,e){return t+e}),0);return t>=100?"99+":t}},methods:{handleBtnSearch:function(){""!==this.value?(this.page=1,console.log("触发了"),this.onLoad(),this.isCardShow=!0,clearTimeout(this.timer)):console.log("这里触发了")},onLoad:function(){var t=this;clearTimeout(this.timer),this.goodsList=[],this.likeList=[];var e=this.searchPastList.find((function(e){return e.value===t.value}));if(e){var n,r=Object(s["a"])(this.searchPastList);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.value===this.value){a.time=(new Date).getTime();break}}}catch(i){r.e(i)}finally{r.f()}this.searchPastList.sort((function(t,e){return e.time-t.time}))}else this.searchPastList.unshift({value:this.value,time:(new Date).getTime()}),this.searchPastList.length>=10&&this.searchPastList.pop();localStorage.setItem("searchPastList",JSON.stringify(this.searchPastList)),p["a"].search({type:this.value,page:this.page,size:this.size}).then((function(e){console.log(e);var n,r=Object(s["a"])(e.data.list);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.goodsList.push(a)}}catch(i){r.e(i)}finally{r.f()}t.total=e.data.total,0!==t.total?(t.goodsList.length>=t.total?t.finished=!0:t.page+=1,t.loading=!1):t.finished=!0}))},onSearch:function(t){""!==t&&(this.value=t,this.page=1,this.finished=!1,this.onLoad())},input:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.value){e.next=3;break}return t.likeList=[],e.abrupt("return");case 3:t.goodsList=[],t.timer?(clearTimeout(t.timer),t.timer=null):t.timer=setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].likeSearch({likeValue:t.value}).then((function(e){t.likeList=e.data.result}));case 2:clearTimeout(t.timer),t.timer=null;case 4:case"end":return e.stop()}}),e)}))),300);case 5:case"end":return e.stop()}}),e)})))()},focus:function(){this.isCardShow=!1},blur:function(){this.goodsList.length>0&&(this.isCardShow=!0)},formatHTML:function(t){var e=new RegExp(this.value,"g");return t.replace(e,this.value.fontcolor("red"))}},created:function(){this.searchPastList=JSON.parse(localStorage.getItem("searchPastList"))||[]}},m=g,b=(n("9a9d"),Object(h["a"])(m,r,a,!1,null,"0d276c38",null));e["default"]=b.exports},"43ba":function(t,e,n){},"4d63":function(t,e,n){var r=n("83ab"),a=n("da84"),i=n("94ca"),s=n("7156"),o=n("9112"),c=n("9bf2").f,u=n("241c").f,l=n("44e7"),f=n("577e"),h=n("ad6d"),d=n("9f7f"),v=n("6eeb"),p=n("d039"),g=n("5135"),m=n("69f3").enforce,b=n("2626"),L=n("b622"),y=n("fce3"),k=n("107c"),x=L("match"),w=a.RegExp,S=w.prototype,C=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,_=/a/g,P=new w($)!==$,O=d.UNSUPPORTED_Y,M=r&&(!P||O||y||k||p((function(){return _[x]=!1,w($)!=$||w(_)==_||"/a/i"!=w($,"i")}))),R=function(t){for(var e,n=t.length,r=0,a="",i=!1;r<=n;r++)e=t.charAt(r),"\\"!==e?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),a+=e):a+="[\\s\\S]":a+=e+t.charAt(++r);return a},A=function(t){for(var e,n=t.length,r=0,a="",i=[],s={},o=!1,c=!1,u=0,l="";r<=n;r++){if(e=t.charAt(r),"\\"===e)e+=t.charAt(++r);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:C.test(t.slice(r+1))&&(r+=2,c=!0),a+=e,u++;continue;case">"===e&&c:if(""===l||g(s,l))throw new SyntaxError("Invalid capture group name");s[l]=!0,i.push([l,u]),c=!1,l="";continue}c?l+=e:a+=e}return[a,i]};if(i("RegExp",M)){for(var E=function(t,e){var n,r,a,i,c,u,d=this instanceof E,v=l(t),p=void 0===e,g=[],b=t;if(!d&&v&&p&&t.constructor===E)return t;if((v||t instanceof E)&&(t=t.source,p&&(e="flags"in b?b.flags:h.call(b))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),b=t,y&&"dotAll"in $&&(r=!!e&&e.indexOf("s")>-1,r&&(e=e.replace(/s/g,""))),n=e,O&&"sticky"in $&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,""))),k&&(i=A(t),t=i[0],g=i[1]),c=s(w(t,e),d?this:S,E),(r||a||g.length)&&(u=m(c),r&&(u.dotAll=!0,u.raw=E(R(t),n)),a&&(u.sticky=!0),g.length&&(u.groups=g)),t!==b)try{o(c,"source",""===b?"(?:)":b)}catch(L){}return c},T=function(t){t in E||c(E,t,{configurable:!0,get:function(){return w[t]},set:function(e){w[t]=e}})},j=u(w),H=0;j.length>H;)T(j[H++]);S.constructor=E,E.prototype=S,v(a,"RegExp",E)}b("RegExp")},5319:function(t,e,n){"use strict";var r=n("d784"),a=n("d039"),i=n("825a"),s=n("a691"),o=n("50c4"),c=n("577e"),u=n("1d80"),l=n("8aa5"),f=n("0cb2"),h=n("14c3"),d=n("b622"),v=d("replace"),p=Math.max,g=Math.min,m=function(t){return void 0===t?t:String(t)},b=function(){return"$0"==="a".replace(/./,"$0")}(),L=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),y=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));r("replace",(function(t,e,n){var r=L?"$":"$0";return[function(t,n){var r=u(this),a=void 0==t?void 0:t[v];return void 0!==a?a.call(t,r,n):e.call(c(r),t,n)},function(t,a){var u=i(this),d=c(t);if("string"===typeof a&&-1===a.indexOf(r)&&-1===a.indexOf("$<")){var v=n(e,u,d,a);if(v.done)return v.value}var b="function"===typeof a;b||(a=c(a));var L=u.global;if(L){var y=u.unicode;u.lastIndex=0}var k=[];while(1){var x=h(u,d);if(null===x)break;if(k.push(x),!L)break;var w=c(x[0]);""===w&&(u.lastIndex=l(d,o(u.lastIndex),y))}for(var S="",C=0,$=0;$<k.length;$++){x=k[$];for(var _=c(x[0]),P=p(g(s(x.index),d.length),0),O=[],M=1;M<x.length;M++)O.push(m(x[M]));var R=x.groups;if(b){var A=[_].concat(O,P,d);void 0!==R&&A.push(R);var E=c(a.apply(void 0,A))}else E=f(_,d,P,O,R,a);P>=C&&(S+=d.slice(C,P)+E,C=P+_.length)}return S+d.slice(C)}]}),!y||!b||L)},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,s;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(s=i.prototype)&&s!==n.prototype&&a(t,s),t}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").find,i=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},"857a":function(t,e,n){var r=n("1d80"),a=n("577e"),i=/"/g;t.exports=function(t,e,n,s){var o=a(r(t)),c="<"+e;return""!==n&&(c+=" "+n+'="'+a(s).replace(i,"&quot;")+'"'),c+">"+o+"</"+e+">"}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9767:function(t,e,n){"use strict";var r=n("23e7"),a=n("857a"),i=n("af03");r({target:"String",proto:!0,forced:i("fontcolor")},{fontcolor:function(t){return a(this,"font","color",t)}})},"98a9":function(t,e,n){"use strict";n("43ba")},"9a9d":function(t,e,n){"use strict";n("f236")},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},f236:function(t,e,n){}}]);
//# sourceMappingURL=chunk-6f52bf7c.433dbca9.js.map